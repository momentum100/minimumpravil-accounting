# UI Гайд: Система Учета ACNE INC

Этот документ описывает основные формы и элементы пользовательского интерфейса (UI), доступные для различных ролей пользователей в системе учета ACNE INC.

## Общие Элементы

*   **Навигационное Меню**: В зависимости от роли, предоставляет доступ к различным разделам (Панель управления, Операции, Отчеты, Управление и т.д.).
*   **Панель Управления (Dashboard)**: Стартовая страница для каждой роли, отображающая ключевую информацию и быстрые ссылки.
*   **Таблицы Данных**: Используются для отображения списков операций, пользователей, счетов и т.д. Поддерживают сортировку, фильтрацию и пагинацию.
*   **Формы**: Стандартные веб-формы для ввода и редактирования данных с использованием Bootstrap 5 стилей.
*   **Уведомления**: Для информирования об успешных действиях или ошибках.

## 1. Роль: Владелец (Owner)

Владелец имеет полный доступ ко всем функциям системы.

### 1.1. Панель Управления

*   **Сводка**: Балансы ключевых системных счетов (SYSTEM_ROMA, SYSTEM_USDT, FINANCE), общий оборот, количество активных баеров/агентств.
*   **Быстрые ссылки**: Управление пользователями, Управление командами, Перемещение средств, Основные отчеты.

### 1.2. Формы Управления

*   **Форма Управления Пользователями**:
    *   **Создание/Приглашение**: Поля для ввода имени, выбора роли (`finance`, `buyer`, `agency`), Email (для веб-входа), Telegram ID (опционально, для связи), Команды (для `buyer`), Контактной информации (для `agency`). Возможность отправки приглашения.
    *   **Редактирование**: Изменение имени, роли, команды, статуса активности (`active`), `sub2` (JSON), контактной информации. Нельзя изменять `telegram_id`?
    *   **Список Пользователей**: Таблица со всеми пользователями, их ролями, статусами, командами.
*   **Форма Управления Командами**:
    *   **Создание**: Поле для ввода Названия (`name`), Описания (`description`).
    *   **Редактирование**: Изменение названия, описания.
    *   **Список Команд**: Таблица со всеми командами, количеством участников.
*   **Форма Управления Счетами** (Предполагается, что счета создаются автоматически или через специальные операции):
    *   **Просмотр**: Таблица всех счетов (`accounts`) с указанием типа (`account_type`), владельца (`user_id`), описания (`description`), валюты (`currency`), текущего баланса (вычисляется).
    *   *Возможно*: Форма для ручного создания системных счетов.

### 1.3. Формы Операций

Владелец имеет доступ ко всем формам операций, как и Финансист.

*   **Форма Перемещения Средств (`fund_transfers`)**: (Аналогично Финансисту)
    *   Поля: Дата (`transfer_date`), Счет-отправитель (`from_account_id` - выбор из списка), Счет-получатель (`to_account_id` - выбор из списка), Сумма (`amount`), Комментарий (`comment`).
*   **Форма Ежедневных Расходов (`daily_expenses`)**: (Доступ для просмотра/редактирования всех записей)
    *   Поля: Дата (`operation_date`), Баер (`buyer_id` - выбор), Категория (`category`), Количество (`quantity`), Тариф (`tariff`), Комментарий (`comment`).
*   **Форма Корректировок (`adjustments`)**: (Доступ для просмотра/редактирования всех записей)
    *   Поля: Дата внесения (`entry_date`), Баер (`buyer_id` - выбор), Категория (`category` - напр., счет агентства), Период корректировки (`adjustment_period` - YYYY.MM), Сумма (`amount`), Комментарий (`comment`).

### 1.4. Отчеты

*   Доступ ко всем отчетам без ограничений.
*   Фильтры по датам, пользователям, командам, типам счетов, категориям операций.

## 2. Роль: Финансист (Finance)

Финансист управляет операционными расходами и перемещением средств.

### 2.1. Панель Управления

*   **Сводка**: Баланс счета FINANCE, SYSTEM_USDT, недавние операции (расходы, корректировки, перемещения).
*   **Быстрые ссылки**: Добавить расход, Добавить корректировку, Переместить средства, Отчеты.

### 2.2. Формы Операций

*   **Форма Ежедневных Расходов (`daily_expenses`)**: (Может добавлять/редактировать расходы *для любого* баера)
    *   Поля: Дата (`operation_date`), Баер (`buyer_id` - выбор из списка баеров), Категория (`category`), Количество (`quantity`), Тариф (`tariff`), Комментарий (`comment`).
*   **Форма Корректировок (`adjustments`)**: (Может добавлять/редактировать корректировки)
    *   Поля: Дата внесения (`entry_date` - текущая), Баер (`buyer_id` - выбор), Категория (`category` - текст или выбор, напр., счет агентства), Период корректировки (`adjustment_period` - выбор месяца/года, YYYY.MM), Сумма (`amount` - положительная или отрицательная), Комментарий/Причина (`comment` - обязательно).
*   **Форма Перемещения Средств (`fund_transfers`)**: (Может инициировать перемещения между счетами, к которым есть доступ)
    *   Поля: Дата (`transfer_date`), Счет-отправитель (`from_account_id` - выбор из доступных), Счет-получатель (`to_account_id` - выбор из доступных), Сумма (`amount`), Комментарий (`comment`).

### 2.3. Просмотр Данных

*   **Просмотр Операций**: Доступ к таблицам со всеми записями `daily_expenses`, `adjustments`, `fund_transfers`.
*   **Просмотр Пользователей/Команд**: Доступ к спискам пользователей и команд в режиме чтения.
*   **Просмотр Счетов**: Доступ к списку всех счетов и их балансов в режиме чтения.

### 2.4. Отчеты

*   Доступ ко всем основным финансовым отчетам.
*   Фильтры по датам, баерам, командам, типам счетов, категориям операций.

## 3. Роль: Баер (Buyer)

Баер вносит информацию о своих ежедневных расходах.

### 3.1. Панель Управления

*   **Сводка**: Баланс основного счета, недавние *собственные* расходы, возможно, статистика расходов по категориям.
*   **Быстрые ссылки**: Добавить расход, Мои расходы, Мои отчеты.

### 3.2. Формы Операций

*   **Форма Ежедневных Расходов (`daily_expenses`)**: (Может добавлять/редактировать *только свои* расходы)
    *   Поля: Дата (`operation_date`), Категория (`category` - выбор из списка: PROXY, CREO, ACCOUNTS, OTHER), Количество (`quantity`), Тариф (`tariff` - может быть по умолчанию 1.00), Комментарий (`comment`). Поле `buyer_id` и `created_by` заполняется автоматически текущим пользователем.

### 3.3. Просмотр Данных

*   **Просмотр Моих Операций**: Доступ к таблице только со *своими* записями `daily_expenses` и `adjustments` (если корректировки видны баерам).
*   **Просмотр Моего Счета**: Информация о своем основном счете и его балансе.

### 3.4. Отчеты

*   Доступ только к отчетам, касающимся *собственной* деятельности.
*   Отчет по расходам за период (с фильтром по дате, категории).

## 4. Роль: Агентство (Agency)

Виртуальный пользователь, представляющий контрагента. Как правило, не имеет прямого доступа к интерфейсу. Взаимодействие происходит через Финансиста или Владельца (например, при корректировках или пополнении счета агентства).

*   **Интерфейс**: Не предусмотрен.
*   **Представление в системе**: Записи в таблице `users` с `is_virtual=true`, соответствующий счет в `accounts`. 